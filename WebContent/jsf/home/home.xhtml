<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:b="http://bootsfaces.net/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
       xmlns:o="http://omnifaces.org/ui"
	  xmlns:of="http://omnifaces.org/functions">
	  
	<h:head>
		<title>#{stringText.homeTitle}</title>	
		<script src="https://maps.googleapis.com/maps/api/js?file=api&amp;v=3&amp;key=AIzaSyCfXN_jHK2GsK3xbGC0L_QH89tb_WsU9N8" type="text/javascript"/>
			
	</h:head>
	<h:body>
		<h:outputScript library="javax.faces" name="jsf.js" target="head"/>
		<h:outputScript library="primefaces" name="jquery/jquery.js" target="head" />
		<h:outputScript library="omnifaces" name="fixviewstate.js" target="head" />
		<o:deferredScript name="findMe.js" type="text/javascript" />
		
		<b:panelGrid  columns="2" size="xs" id="info-home">
			<b:panel title="#{stringText.userInfo}" >
				<b:form id="formId">
					#{userManager.user.userName} <br/>
					latitude = #{userManager.latitude}  longitude = #{userManager.longitude} <br/>
			    	<h:inputHidden id="latitude" value="#{userManager.latitude}" />
			   		<h:inputHidden id="longitude" value="#{userManager.longitude}" />	   		
			    	<b:commandButton value="#{stringButton.findMe}" update="info-home map-search-id" />
			    	<b:commandButton action="#{userManager.logout}" update="growl-home" value="#{stringButton.logout}" />
		    
				</b:form>
			</b:panel>
			
			<b:panel id="search-history-id" title="#{stringText.previousResult}" >
				<ui:include src="searchHistory.xhtml"></ui:include>
			</b:panel>
		</b:panelGrid>
					
		<b:panel col-xs="6" col-sm="6" col-md="3" title= "#{stringText.researchForm}">
			<b:container id="search-form-id" fluid="true" >
				<ui:include src="search.xhtml" ></ui:include>
			</b:container>
						
		</b:panel>
		
		<b:panel  col-xs="12" col-sm="8" col-md="9" title= "#{stringText.researchResult}">
			<b:panelGrid columns="2" id="info-result">
				<b:panel id="result-search-id" title="#{stringText.tabView}"  >	
					 <ui:include src="searchResult.xhtml"/>
				</b:panel>
				
				<b:panel id="map-search-id" title="#{stringText.mapView}"  >	
					 	<ui:include src="searchMap.xhtml"></ui:include>
				</b:panel>
			</b:panelGrid>
				
		</b:panel>
		
		<b:growl id="growl-home" life="1000" placementFrom="top" show-detail="false" global-only="false"
	       					show-summary="true" allow-dismiss="true" animation-enter="animated bounceInDown"
	      						 animation-exit="animated flipOutX" escape="true"   />
				 	
	</h:body>
</html>